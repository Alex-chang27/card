<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ä¸ƒå¤•çµ¦å¦³çš„å°å°éŠæˆ²</title>
<meta name="theme-color" content="#0f1020" />
<style>
  :root{
    --bg:#0f1020;
    --txt:#ffffff;
    --btn:#ffb3c1;
    --btn-txt:#000000;
    --card:#ffffff;
    --card-txt:#000000;
  }
  *{box-sizing:border-box}
  body{ margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Arial,"Apple Color Emoji","Segoe UI Emoji";
        background:var(--bg); color:var(--txt); text-align:center; line-height:1.6; }
  header{ padding:24px 16px 8px }
  h1{ margin:0 0 8px; font-size: clamp(20px, 4vw, 28px); }
  main{ padding: 8px 16px 32px; max-width: 720px; margin: 0 auto; }

  .stage{ display:none; opacity:0; transform: translateY(8px); transition: opacity .28s ease, transform .28s ease; }
  .stage.active{ display:block; opacity:1; transform:none; }
  .q{ margin:24px 0 10px; font-size: clamp(18px, 3.5vw, 22px); }

  .btns{ display:flex; flex-wrap:wrap; gap:10px; justify-content:center; }
  button{ margin:0; padding:10px 14px; border:none; border-radius:10px; background:var(--btn); color:var(--btn-txt);
          cursor:pointer; font-size:16px; transition: transform .05s ease, filter .15s ease; }
  button:hover{ filter:brightness(1.05) }
  button:active{ transform: translateY(1px) }
  button:focus-visible{ outline: 2px solid #fff; outline-offset: 2px; }
  button[type="button"]{ /* ensure form-free behavior */ }

  .progress{ margin:8px 0 18px; display:flex; gap:6px; justify-content:center; }
  .dot{ width:8px; height:8px; border-radius:50%; background:#ffffff33 }
  .dot.on{ background:#ffffffaa }

  .final-card{ background:var(--card); color:var(--card-txt); padding:20px; border-radius:12px; margin-top:20px; text-align:left; }
  .final-actions{ margin-top:14px; display:flex; gap:10px; flex-wrap:wrap }
  .replay{ background:#d1e9ff }
  .share{ background:#ffd6a5 }

  /* å°å°å½©å±‘å®¹å™¨ */
  .confetti{ pointer-events:none; position:fixed; inset:0; overflow:hidden; }
  .confetti span{ position:absolute; width:8px; height:12px; background:#fff; opacity:0; animation: fall 1500ms linear forwards; }
  @keyframes fall{
    0%{ transform: translateY(-10vh) rotate(0deg); opacity:1 }
    100%{ transform: translateY(110vh) rotate(540deg); opacity:0 }
  }

  /* ç„¡éšœç¤™ï¼šåå¥½æ¸›å°‘å‹•æ•ˆæ™‚ï¼Œé—œé–‰å‹•ç•« */
  @media (prefers-reduced-motion: reduce){
    .stage{ transition:none }
    button{ transition:none }
    .confetti span{ animation: none }
  }
</style>
</head>
<body>
  <header>
    <h1 id="title">ä¸ƒå¤•å°éŠæˆ²ï¼ˆæˆ‘å¾ˆç”¨å¿ƒåšçš„ï¼ï¼ï¼‰</h1>
  </header>

  <main role="main" aria-labelledby="title">
    <div class="progress" aria-hidden="true" id="progress"></div>

    <div id="stages" aria-live="polite">
      <section class="stage active" data-step="1">
        <p class="q">çœ‹åˆ°ã€Œä¸ƒå¤•ã€ï¼Œä½ ç¬¬ä¸€å€‹æƒ³åˆ°çš„æ˜¯ï¼Ÿ</p>
        <div class="btns">
          <button type="button" data-next>æµªæ¼«çš„æ˜Ÿç©º</button>
          <button type="button" data-next>ç”œç”œçš„ç´„æœƒ</button>
        </div>
      </section>

      <section class="stage" data-step="2">
        <p class="q">å¦‚æœä»Šæ™šæ”¶åˆ°ä¸€å€‹å°é©šå–œï¼Œä½ æœƒæƒ³æ˜¯ï¼Ÿ</p>
        <div class="btns">
          <button type="button" data-next>ä¸€æ¯å–œæ­¡çš„é£²æ–™</button>
          <button type="button" data-next>ä¸€å¼µå°å¡ç‰‡</button>
        </div>
      </section>

      <section class="stage" data-step="3">
        <p class="q">æˆ‘å€‘ä¸‹æ¬¡è¦‹é¢ï¼Œæœ€æƒ³ä¸€èµ·åšä»€éº¼ï¼Ÿ</p>
        <div class="btns">
          <button type="button" data-next>åœ¨æµ·é‚Šæ•£æ­¥</button>
          <button type="button" data-next>åƒå¥½åƒçš„</button>
        </div>
      </section>

      <section class="stage" data-step="4">
        <p class="q">æœ€å¾Œä¸€é¡Œï¼šæ­¤åˆ»è…¦æµ·è£¡æµ®ç¾çš„ä¸‰å€‹å­—ï¼Ÿ</p>
        <div class="btns">
          <button type="button" data-final>æƒ³ä½ äº†</button>
          <button type="button" data-final>å¿«è¦‹é¢</button>
        </div>
      </section>
    </div>

    <section id="final" hidden>
      <div class="final-card">
        <h2>ä¸ƒå¤•å¿«æ¨‚ âœ¨</h2>
        <p>ä»Šå¤©æ˜¯å€‹éå¸¸ç‰¹åˆ¥çš„æ—¥å­ï¼Œé›–ç„¶ç¾åœ¨æˆ‘å€‘ä¸åœ¨åŒä¸€å€‹åœ°æ–¹ï¼Œä½†ä»Šå¤©æœ€æƒ³åˆ†äº«å¿ƒæƒ…çš„äººæ˜¯å¦³ã€‚</p>
        <p>å°å°çš„å¿ƒæ„å…ˆç•™åœ¨é€™ï¼ŒçœŸæ­£æƒ³èªªçš„è©±ï¼Œç­‰æŸä¸€å€‹ç‰¹åˆ¥çš„æ™‚åˆ»å†ç•¶é¢å‘Šè¨´å¦³~</p>
        <p>â€” ä¾†è‡ªä¸€å€‹éå¸¸åœ¨ä¹ä½ çš„äºº</p>

        <div class="final-actions">
          <button type="button" class="replay" id="replay">å†ç©ä¸€æ¬¡</button>
          <button type="button" class="share" id="share">åˆ†äº«çµ¦å¦³ï¼ˆWeb Shareï¼‰</button>
        </div>
      </div>
    </section>
  </main>

  <div class="confetti" aria-hidden="true" id="confetti"></div>

<script>
(function(){
  let step = 1;
  const total = document.querySelectorAll('.stage').length;
  const stages = document.getElementById('stages');
  const final = document.getElementById('final');
  const progress = document.getElementById('progress');
  const confettiBox = document.getElementById('confetti');

  // å»ºç«‹é€²åº¦é»
  function renderDots(){
    progress.innerHTML = '';
    for(let i=1;i<=total;i++){
      const d=document.createElement('div');
      d.className='dot' + (i===step?' on':'');
      progress.appendChild(d);
    }
  }
  renderDots();

  // åˆ‡æ›åˆ°ä¸‹ä¸€æ­¥ï¼ˆå«é‚Šç•Œä¿è­·ï¼‰
  function goNext(){
    const curr = document.querySelector(`.stage[data-step="${step}"]`);
    if(curr){ curr.classList.remove('active'); }
    step = Math.min(step+1, total);
    const next = document.querySelector(`.stage[data-step="${step}"]`);
    if(next){ next.classList.add('active'); }
    renderDots();
  }

  // é¡¯ç¤ºæœ€çµ‚å¡ç‰‡
  function showFinal(){
    const curr = document.querySelector(`.stage[data-step="${step}"]`);
    if(curr){ curr.classList.remove('active'); }
    stages.setAttribute('aria-hidden','true');
    final.hidden = false;
    sprinkle();
  }

  // äº‹ä»¶å§”æ´¾ï¼šé»æ“Š
  stages.addEventListener('click', (e)=>{
    const t = e.target;
    if(t.matches('[data-next]')) goNext();
    if(t.matches('[data-final]')) showFinal();
  });

  // éµç›¤æ”¯æ´ï¼šæ•¸å­— 1 / 2 å¿«é¸ã€Enter
  document.addEventListener('keydown', (e)=>{
    const active = document.querySelector('.stage.active');
    if(!active) return;
    const btns = active.querySelectorAll('button');
    if(e.key === '1' && btns[0]) btns[0].click();
    if(e.key === '2' && btns[1]) btns[1].click();
    if(e.key === 'Enter'){
      const focused = document.activeElement;
      if(focused && focused.tagName==='BUTTON') focused.click();
    }
  });

  // å†ç©ä¸€æ¬¡
  document.getElementById('replay').addEventListener('click', ()=>{
    final.hidden = true;
    stages.removeAttribute('aria-hidden');
    step = 1;
    document.querySelectorAll('.stage').forEach(s=>s.classList.remove('active'));
    document.querySelector(`.stage[data-step="1"]`).classList.add('active');
    renderDots();
    window.scrollTo({top:0, behavior:'smooth'});
  });

  // Web Shareï¼ˆå¯é¸ï¼‰
  document.getElementById('share').addEventListener('click', async ()=>{
    const data = {
      title: 'ä¸ƒå¤•çµ¦å¦³çš„å°å°éŠæˆ²',
      text: 'é€å¦³ä¸€å€‹å°å°çš„ä¸ƒå¤•äº’å‹•å¡ç‰‡ ğŸ’–',
      url: location.href
    };
    if(navigator.share){
      try{ await navigator.share(data); }catch(_){}
    }else{
      // å¾Œå‚™ï¼šè¤‡è£½é€£çµ
      await navigator.clipboard.writeText(location.href);
      alert('å·²è¤‡è£½é€£çµï¼Œè²¼çµ¦å¥¹å§ï¼');
    }
  });

  // ç°¡å–®å½©å±‘
  function sprinkle(){
    const n = 80;
    confettiBox.innerHTML = '';
    for(let i=0;i<n;i++){
      const s = document.createElement('span');
      s.style.left = Math.random()*100 + 'vw';
      s.style.top = (-10 - Math.random()*20) + 'vh';
      s.style.background = randomPastel();
      s.style.transform = `translateY(0) rotate(${Math.random()*360}deg)`;
      s.style.animationDelay = (Math.random()*0.6) + 's';
      s.style.animationDuration = (1100 + Math.random()*900) + 'ms';
      confettiBox.appendChild(s);
    }
    setTimeout(()=>{ confettiBox.innerHTML=''; }, 2200);
  }
  function randomPastel(){
    const h = Math.floor(Math.random()*360);
    return `hsl(${h} 100% 85%)`;
  }
})();
</script>
</body>
</html>